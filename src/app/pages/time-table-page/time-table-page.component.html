<ion-content>
  <div
    id="bg-cover"
    class="absolute bg-[#015aa8] top-0 left-0 right-0 bottom-0 w-full h-full z-0"
  >
    <!-- <img
      class="object-fill w-full h-full z-0"
      src="assets/components/sign_in_bg.png"
      alt=""
      srcset=""
    /> -->
  </div>
  <div class="absolute top-16 left-0 right-0 w-full">
    <img
      class="object-fill w-full h-full z-0"
      src="assets/components/star_pattern.png"
      alt=""
      srcset=""
    />
  </div>
  <div
    id="container"
    class="absolute top-0 bottom-0 left-0 right-0 w-full h-full"
  >
    <div class="relative w-full h-full flex flex-col">
      <mat-toolbar
        class="flex flex-row items-center !bg-transparent !h-24 !py-8"
      >
        <ion-buttons slot="start">
          <ion-back-button
            class="text-white"
            defaultHref="/tabs/tab-1"
          ></ion-back-button>
        </ion-buttons>
        <ion-text class="!text-white">{{
          "timeTablePage.labels.timeTableText" | translate
        }}</ion-text>
      </mat-toolbar>
      <div
        class="bg-white px-8 py-8 grow w-full h-auto rounded-tl-[3.5rem] rounded-tr-[3.5rem] relative"
      >
        <div class="flex flex-col space-y-4">
          <div class="flex flex-col w-full">
            <form
              id="time-table-form"
              (ngSubmit)="submitTimeTableForm()"
              [formGroup]="timeTableFormGroup"
              class="flex flex-row items-center justify-between w-full space-x-2"
            >
              <div class="flex flex-col !w-1/2">
                <ion-text class="placeholer-text">{{
                  "defaults.labels.from" | translate
                }}</ion-text>
                <mat-form-field>
                  <input
                    placeholder="MM/DD/YYYY"
                    matInput
                    [matDatepicker]="picker"
                    [formControl]="From_Date"
                  />
                  <mat-datepicker-toggle
                    matIconSuffix
                    [for]="picker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="flex flex-col !w-1/2">
                <ion-text class="placeholer-text">{{
                  "defaults.labels.to" | translate
                }}</ion-text>
                <mat-form-field>
                  <input
                    placeholder="MM/DD/YYYY"
                    matInput
                    [matDatepicker]="picker2"
                    [formControl]="To_Date"
                  />
                  <mat-datepicker-toggle
                    matIconSuffix
                    [for]="picker2"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker2></mat-datepicker>
                </mat-form-field>
              </div>
            </form>
            <div class="flex flex-row items-center justify-end">
              <button form="time-table-form" type="ngSubmit" mat-flat-button>
                {{ "addStudentPage.actions.submit" | translate }}
              </button>
            </div>
          </div>
          <mat-tab-group
            class="w-full"
            *ngIf="timeTable$ | async as timeTable; else noTimeTableFound"
          >
            <ng-container *ngFor="let day of timeTable | availableWeekdays">
              <mat-tab
                [label]="
                  'timeTablePage.daysOfWeek.' + day.toLocaleLowerCase()
                    | translate
                "
              >
                <mat-list class="!space-y-4">
                  <ng-container
                    *ngFor="let lesson of timeTable[day]; index as ind"
                  >
                    @if (lesson?.Type | isPeriodScheduleType) {
                    <mat-card
                      appearance="outlined"
                      class="w-full !bg-white p-2 flex flex-col space-y-2"
                    >
                      <mat-card-title
                        class="mat-body-large !font-semibold capitalize text-black"
                      >
                        {{ lesson?.Subject?.toLocaleLowerCase() }}
                      </mat-card-title>
                      <mat-card-subtitle class="placeholer-text mat-body-small">
                        {{ lesson?.Time }}
                      </mat-card-subtitle>
                      <mat-divider></mat-divider>
                      <div
                        class="flex flex-row items-center justify-between w-full"
                      >
                        <p class="placeholer-text mat-body-small">
                          {{ lesson?.Teacher }}
                        </p>
                        <p class="mat-body-small text-black">
                          {{ lesson?.Type | scheduleTypePipe }}
                        </p>
                      </div>
                    </mat-card>
                    } @else if (lesson?.Type | isBreakScheduleType) {
                    <mat-card
                      appearance="outlined"
                      class="w-full !bg-white p-2 flex flex-col space-y-2"
                    >
                      <div
                        class="flex flex-row items-center justify-between py-1"
                      >
                        <div class="flex flex-col">
                          <mat-card-title
                            class="mat-body-large !font-semibold text-black"
                          >
                            {{ lesson?.Type | scheduleTypePipe }}
                          </mat-card-title>
                          <mat-card-subtitle
                            class="placeholer-text mat-body-small"
                          >
                            {{ lesson?.Time }}
                          </mat-card-subtitle>
                        </div>
                        <div class="h-14 w-14">
                          <img
                            src="assets/components/break_img.png"
                            alt=""
                            srcset=""
                            class="w-full h-full object-fill"
                          />
                        </div>
                      </div>
                    </mat-card>
                    } @else {
                    <div class="w-full h-full grid place-items-center">
                      <ion-text
                        class="mt-16 w-full text-center mat-title-medium"
                        >{{
                          "defaults.errors.notAvailableText" | translate
                        }}</ion-text
                      >
                    </div>
                    }
                  </ng-container>
                </mat-list>
              </mat-tab>
            </ng-container>
          </mat-tab-group>
          <ng-template #noTimeTableFound>
            <div class="w-hull h-full grid place-items-center">
              <ion-text class="mt-52 text-black mat-title-large">{{
                "defaults.errors.notAvailableText" | translate
              }}</ion-text>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</ion-content>
